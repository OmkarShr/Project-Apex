### 20. Billing and Payment Subsystem
Design a secure and reliable subsystem to manage all financial transactions related to customer orders. This module is responsible for the complete billing and payment lifecycle, ensuring accuracy and compliance. Its duties begin when an order is placed, where it must integrate with third-party payment gateways (e.g., Stripe, PayPal) to securely authorize and capture payments from customers.[7] A core component of this module is a sophisticated pricing engine capable of calculating the final order total by applying various business rules, including item prices, volume-based discounts, promotional codes, and, critically, calculating applicable sales taxes based on the customer's shipping destination. Once an order is shipped, this module is responsible for finalizing the transaction and recording it in a secure financial ledger. It must also handle all financial aspects of returns, processing refunds or issuing store credit upon receiving instructions from the Reverse Logistics module. The subsystem must maintain a detailed, auditable history of all transactions and provide reporting capabilities for financial reconciliation and analysis.[15, 3]